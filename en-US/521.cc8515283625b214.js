"use strict";(self.webpackChunkbankrupt_frontend=self.webpackChunkbankrupt_frontend||[]).push([[521],{7562:(B,f,n)=>{n.d(f,{d:()=>Q});var l=n(6223),O=n(4201),_=n(194),L=n(7700),c=n(7259),e=n(5879),x=n(30),h=n(1662),D=n(6945),z=n(8249),P=n(2490),T=n(6925),N=n(5462),u=n(8480),g=n(6814),C=n(7035),I=n(4736),Y=n(7851),J=n(1998);function V(p,K){1&p&&e._UZ(0,"util-progress",32),2&p&&e.Q6J("bar",!0)}function w(p,K){if(1&p){const i=e.EpF();e.TgZ(0,"div",1)(1,"div",7)(2,"label",33)(3,"span"),e.SDv(4,34),e.qZA(),e.TgZ(5,"em",10),e._uU(6,"*"),e.qZA()(),e.TgZ(7,"app-organization-select",35),e.NdJ("selected",function(E){e.CHM(i);const a=e.oxw();return e.KtG(a.onOrgSelected(E))}),e.qZA()(),e.TgZ(8,"div",7)(9,"label",36)(10,"span"),e.SDv(11,37),e.qZA(),e.TgZ(12,"em",10),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"app-user-select",38),e.NdJ("selected",function(E){e.CHM(i);const a=e.oxw();return e.KtG(a.onUserSelected(E))}),e.qZA()()()}if(2&p){const i=e.oxw();e.xp6(7),e.Q6J("selectedItem",i.selectedOrg),e.xp6(7),e.Q6J("selectedItem",i.selectedUser)}}function q(p,K){if(1&p&&(e.TgZ(0,"em")(1,"span",47),e._uU(2),e.qZA()()),2&p){const i=e.oxw(2);e.xp6(1),e.Q6J("ngClass",i.checkUsernameResponse.available?"text-success":"text-danger"),e.xp6(1),e.Oqu(i.checkUsernameResponse.reason)}}function X(p,K){if(1&p){const i=e.EpF();e.TgZ(0,"div",39)(1,"div",7)(2,"label",40)(3,"span"),e.SDv(4,41),e.qZA(),e.TgZ(5,"em",10),e._uU(6,"*"),e.qZA()(),e.TgZ(7,"input",42),e.NdJ("keyup",function(E){e.CHM(i);const a=e.oxw();return e.KtG(a.onUsernameChange(E))}),e.qZA(),e.YNc(8,q,3,2,"em",43),e.qZA(),e.TgZ(9,"div",7)(10,"label",44)(11,"span"),e.SDv(12,45),e.qZA(),e.TgZ(13,"em",10),e._uU(14,"*"),e.qZA()(),e._UZ(15,"input",46),e.TgZ(16,"em",12),e._uU(17),e.qZA()()()}if(2&p){const i=e.oxw();e.xp6(8),e.Q6J("ngIf",i.checkUsernameResponse),e.xp6(9),e.hij(" ",i.errMsg(i.employeeForm.controls.user,"password","minLength","Password should be between 6 to 30 characters!")," ")}}let Q=(()=>{class p extends O.C{constructor(i,r,E,a,M,v,y,b,Z,A){super(i,r,E,a,A),this.employeeService=M,this.orgService=v,this.userService=y,this.notifier=b,this.config=_.fG,this.selectedOrg=null,this.selectedUser=null,this.employeeForm=new l.cw({name:new l.NI("",[l.kI.required,l.kI.minLength(3)]),title:new l.NI("",[l.kI.required,l.kI.minLength(3)]),phone:new l.NI(null,[]),email:new l.NI(null,[l.kI.email]),description:new l.NI(""),image:new l.NI(null),organization_id:new l.NI(-1),user_id:new l.NI(-1),user:new l.cw({username:new l.NI("",[l.kI.required,l.kI.minLength(3)]),password:new l.NI("",[l.kI.required,l.kI.minLength(6),l.kI.maxLength(30)]),role_names:new l.NI([],[])})}),this.isAdmin=!1,this.isUpdate=!1,this.checkUsernameResponse=null,Z.isAdmin()&&(this.config.endpoint=_.wl.adminEndpoint,this.config.delEndpoint=_.wl.adminEndpoint,this.isAdmin=!0),null!=A.title&&this.employeeForm.controls.title.setValue(A.title)}componentName(){return p.name}ngOnInit(){super.ngOnInit();let i=this.componentKey(c.Z.ORGANIZATIONS.GET_MY_ORG());this.orgService.fetchMyOrgs(i),this.subscribe(i,null,(r,E)=>{this.selectedOrg=E.data[0],this.employeeForm.controls.organization_id.setValue(null==this.selectedOrg?-1:this.selectedOrg.id)}),this.subscribe(this.getErrorKey(i),null,(r,E)=>{console.log(E.data)})}getBreadcrumbItems(){return[{text:this.translations.Dashboard,link:null,active:!1},{text:"Employees",link:"/dash/employees",active:!1},{text:"Upsert",link:null,active:!0}]}initialize(i){if(this.loading=!0,this.isUpdate=null!=i,this.isUpdate){const E=this.employeeForm.get("user");E.removeControl("username"),E.removeControl("password")}let r=this.componentKey(c.Z.EMPLOYEES.GET(i));this.employeeService.fetchSingle(r,this.config.endpoint,i),this.subscribe(r,null,(E,a)=>{this.loading=!1,this.populateForm(a.data)}),this.subscribe(this.getErrorKey(r),null,(E,a)=>{console.log(a.data),this.loading=!1})}onSubmit(){this.employeeForm.valid&&this.upsert(this.exId)}onImgUploaded(i){i.length>0&&this.employeeForm.controls.image.setValue(i[0].image_url)}getExImages(){let i=this.employeeForm.controls.image.value;return null==i?[]:[{image_url:i,thumb_url:i}]}getConfig(){return this.config}getListPageRoute(){return _.n5.list}upsert(i){this.loading=!0;let E,r=this.componentKey(c.Z.EMPLOYEES.UPSERT(i));null==i?(E=this.employeeForm.value,E.user.name=E.name,E.user.phone=E.phone,E.user.email=E.email,E.user.role_names=["Salesman"]):E=this.employeeForm.value,this.employeeService.upsert(r,this.config.endpoint,E,i),this.subscribe(r,null,(a,M)=>{this.notifier.success("Success","Employee has been "+(i?"updated":"created")),this.employeeForm.reset(),this.onSuccess(M.data)}),this.subscribe(this.getErrorKey(r),null,(a,M)=>{let v=M.data;this.loading=!1,this.notifier.warning("Failed!",v.error.message)})}populateForm(i){this.selectedOrg=i.organization,this.selectedUser=i.user,this.employeeForm.controls.name.setValue(i.name),this.employeeForm.controls.title.setValue(i.title),this.employeeForm.controls.description.setValue(i.description),this.employeeForm.controls.phone.setValue(i.phone),this.employeeForm.controls.email.setValue(i.email),this.employeeForm.controls.image.setValue(null==i.image?null:i.image),this.employeeForm.controls.organization_id.setValue(i.organization.id),this.employeeForm.controls.user_id.setValue(i.user.id)}onOrgSelected(i){this.selectedOrg=i,this.employeeForm.controls.organization_id.setValue(null==this.selectedOrg?-1:this.selectedOrg.id)}onUserSelected(i){this.selectedUser=i,this.employeeForm.controls.user_id.setValue(null==this.selectedUser?-1:this.selectedUser.id)}onUsernameChange(i){let r=i.target.value;if(r.length<3)return;let E=this.componentKey(c.Z.USERS.CHECK_USERNAME({username:r}));this.userService.checkUsername(E,r),this.subscribe(E,null,(a,M)=>{this.checkUsernameResponse=M.data,this.checkUsernameResponse?.available?this.employeeForm.controls.user.get("username")?.setErrors(null):this.employeeForm.controls.user.get("username")?.setErrors({invalid:!0})})}static#_=this.\u0275fac=function(r){return new(r||p)(e.Y36(x.Y),e.Y36(h.F0),e.Y36(D.z),e.Y36(h.gz),e.Y36(z.G),e.Y36(P.M),e.Y36(T.K),e.Y36(N.l),e.Y36(u.e),e.Y36(L.WI))};static#e=this.\u0275cmp=e.Xpm({type:p,selectors:[["app-employee-upsert"]],features:[e.qOj],decls:57,vars:15,consts:function(){let i,r,E,a,M,v,y,b,Z;return i="Name",r="Title",E="Phone",a="Email",M="Description",v="Organization",y="User",b="Username",Z="Password",[["xmlns","http://www.w3.org/1999/html",3,"bar",4,"ngIf"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"card-title","mb-4"],[3,"formGroup"],[1,"mb-3","col-md-6"],["for","name-input",1,"form-label"],i,[1,"error"],["type","text","id","name-input","placeholder","Enter Name","name","name","formControlName","name",1,"form-control"],[1,"text-danger"],["for","title-input",1,"form-label"],r,["type","text","id","title-input","placeholder","Enter Title","name","title","formControlName","title",1,"form-control"],["for","phone-input",1,"form-label"],E,["type","text","id","phone-input","placeholder","Enter Phone","name","phone","formControlName","phone",1,"form-control"],["for","email-input",1,"form-label"],a,["type","text","id","email-input","placeholder","Enter Email","name","email","formControlName","email",1,"form-control"],[1,"mb-3"],["for","description",1,"form-label"],M,["id","description","placeholder","Enter Description","rows","5","name","description","formControlName","description",1,"form-control"],[3,"title","multiSelect","existingImages","required","onUploaded"],["class","row",4,"ngIf"],["class","row bg-warning-subtle py-1 my-2","formGroupName","user",4,"ngIf"],[1,"d-flex","flex-wrap","gap-3","float-end"],[1,"btn","btn-secondary","waves-effect",3,"click"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light",3,"ngClass","click"],["xmlns","http://www.w3.org/1999/html",3,"bar"],["for","organization",1,"form-label"],v,["id","organization",3,"selectedItem","selected"],["for","user",1,"form-label"],y,["id","user",3,"selectedItem","selected"],["formGroupName","user",1,"row","bg-warning-subtle","py-1","my-2"],["for","username-input",1,"form-label"],b,["type","text","id","username-input","placeholder","Enter Username","name","username","formControlName","username",1,"form-control",3,"keyup"],[4,"ngIf"],["for","password-input",1,"form-label"],Z,["type","text","id","password-input","placeholder","Enter Password","name","password","formControlName","password",1,"form-control"],[3,"ngClass"]]},template:function(r,E){1&r&&(e.YNc(0,V,1,1,"util-progress",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e._uU(6,"Create/Update Employee"),e.qZA(),e.TgZ(7,"form",6)(8,"div",1)(9,"div",7)(10,"label",8)(11,"span"),e.SDv(12,9),e.qZA(),e.TgZ(13,"em",10),e._uU(14,"*"),e.qZA()(),e._UZ(15,"input",11),e.TgZ(16,"em",12),e._uU(17),e.qZA()(),e.TgZ(18,"div",7)(19,"label",13)(20,"span"),e.SDv(21,14),e.qZA(),e.TgZ(22,"em",10),e._uU(23,"*"),e.qZA()(),e._UZ(24,"input",15),e.TgZ(25,"em",12),e._uU(26),e.qZA()()(),e.TgZ(27,"div",1)(28,"div",7)(29,"label",16)(30,"span"),e.SDv(31,17),e.qZA()(),e._UZ(32,"input",18),e.TgZ(33,"em",12),e._uU(34),e.qZA()(),e.TgZ(35,"div",7)(36,"label",19)(37,"span"),e.SDv(38,20),e.qZA()(),e._UZ(39,"input",21),e.TgZ(40,"em",12),e._uU(41),e.qZA()()(),e.TgZ(42,"div",22)(43,"label",23)(44,"span"),e.SDv(45,24),e.qZA()(),e._UZ(46,"textarea",25),e.TgZ(47,"em",12),e._uU(48),e.qZA()(),e.TgZ(49,"app-file-picker",26),e.NdJ("onUploaded",function(M){return E.onImgUploaded(M)}),e.qZA(),e.YNc(50,w,15,2,"div",27),e.YNc(51,X,18,2,"div",28),e.TgZ(52,"div",29)(53,"button",30),e.NdJ("click",function(){return E.onCancel()}),e._uU(54," Cancel "),e.qZA(),e.TgZ(55,"button",31),e.NdJ("click",function(){return E.onSubmit()}),e._uU(56," Submit "),e.qZA()()()()()()()),2&r&&(e.Q6J("ngIf",E.loading),e.xp6(1),e.Q6J("@loaded",!E.loading),e.xp6(6),e.Q6J("formGroup",E.employeeForm),e.xp6(10),e.hij(" ",E.errMsg(E.employeeForm,"name","minLength","Name should be at least 3 characters!")," "),e.xp6(9),e.hij(" ",E.errMsg(E.employeeForm,"title","minLength","Title should be at least 3 characters!")," "),e.xp6(8),e.hij(" ",E.errMsg(E.employeeForm,"phone","minLength","Phone should be at least 3 characters!")," "),e.xp6(7),e.hij(" ",E.errMsg(E.employeeForm,"email","minLength","Email should be at least 3 characters!")," "),e.xp6(7),e.hij(" ",E.errMsg(E.employeeForm,"description","minLength","Description should be at least 20 characters!")," "),e.xp6(1),e.s9C("title",E.translations.Image),e.Q6J("multiSelect",!1)("existingImages",E.getExImages())("required",!1),e.xp6(1),e.Q6J("ngIf",E.isAdmin),e.xp6(1),e.Q6J("ngIf",!E.isUpdate),e.xp6(4),e.Q6J("ngClass",E.employeeForm.valid?"":"disabled"))},dependencies:[g.mk,g.O5,C.P,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,l.x0,I.t,Y.w,J.q]})}return p})()},194:(B,f,n)=>{n.d(f,{fG:()=>L,n5:()=>c,wl:()=>_});var l=n(7989),O=n(5878);let _={endpoint:O.R.EMPLOYEES.EMPLOYEE_ENDPOINT,adminEndpoint:O.R.EMPLOYEES.EMPLOYEE_ENDPOINT_ADMIN},L={defaultLayout:l.A.GRID,upsertOnDialog:!0,showUserFilter:!1,showDeleteButton:!0,endpoint:_.endpoint,delEndpoint:_.endpoint},c={list:"/dash/employees",create:"/dash/employees/create",update(e){return null==e?this.create:"/dash/employees/"+e+"/update"}}},8249:(B,f,n)=>{n.d(f,{G:()=>h});var l=n(1547),O=n(5878),_=n(5879),L=n(8480),c=n(5462),e=n(9862),x=n(30);let h=(()=>{class D extends l.b{constructor(P,T,N,u){super(P,T),this.http=N,this.eventBusService=u}search(P,T,N){let u=O.R.EMPLOYEES.SEARCH(T,N);this.http.get(u).subscribe(g=>{this.eventBusService.publish(P,g.body)},g=>{this.handleError(g,C=>{this.search(P,T,N)},C=>{this.eventBusService.publish(this.getErrorKey(P),C)})})}fetchSingle(P,T,N){this.http.get(O.R.EMPLOYEES.GET(T,N)).subscribe(u=>{this.eventBusService.publish(P,u.body)},u=>{this.handleError(u,g=>{this.fetchSingle(P,T,N)},g=>{this.eventBusService.publish(this.getErrorKey(P),g)})})}upsert(P,T,N,u){let g=null==u?O.R.EMPLOYEES.CREATE(T):O.R.EMPLOYEES.UPDATE(T,u);(null==u?this.http.post(g,N):this.http.patch(g,N)).subscribe(I=>{this.eventBusService.publish(P,I.body)},I=>{this.handleError(I,Y=>{this.upsert(P,T,N,u)},Y=>{this.eventBusService.publish(this.getErrorKey(P),Y)})})}static#_=this.\u0275fac=function(T){return new(T||D)(_.LFG(L.e),_.LFG(c.l),_.LFG(e.eN),_.LFG(x.Y))};static#e=this.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})()},5878:(B,f,n)=>{n.d(f,{R:()=>_});var l=n(2495),O=n(553);class _ extends l.O{static#_=this.EMPLOYEES={EMPLOYEE_ENDPOINT:O.N.base_url+"/api/v1/employees",EMPLOYEE_ENDPOINT_ADMIN:O.N.base_url+"/api/v1/admin/employees",SEARCH:(c,e)=>c.concat(l.O.toParamString(e)),CREATE:c=>c,GET:(c,e)=>c+"/"+e,UPDATE:(c,e)=>c+"/"+e}}},9521:(B,f,n)=>{n.r(f),n.d(f,{HrModule:()=>u_});var l=n(6814),O=n(1662),_=n(5879),L=n(194),c=n(1855),e=n(6542),x=n(7259),h=n(7562),D=n(5801),z=n(30),P=n(6945),T=n(8480),N=n(8675),u=n(8249),g=n(5462),C=n(2490),I=n(4736),Y=n(1836),J=n(6075),V=n(9582),w=n(7485),q=n(2770);function X(o,m){1&o&&_._UZ(0,"util-progress",9),2&o&&_.Q6J("bar",!0)}function Q(o,m){1&o&&(_.TgZ(0,"h4",21),_.SDv(1,22),_.qZA())}function p(o,m){1&o&&(_.TgZ(0,"h4",23),_.SDv(1,24),_.qZA())}function K(o,m){if(1&o&&(_.TgZ(0,"div",10)(1,"div",11)(2,"div",0)(3,"div",12)(4,"div",13)(5,"h1",14),_._UZ(6,"i",15),_.qZA(),_.YNc(7,Q,2,0,"h4",16),_.YNc(8,p,2,0,"h4",17),_.qZA()()(),_.TgZ(9,"div",18)(10,"div",19)(11,"div"),_._UZ(12,"img",20),_.qZA()()()()()),2&o){const t=_.oxw();_.xp6(7),_.Q6J("ngIf",t.loading),_.xp6(1),_.Q6J("ngIf",!t.loading)}}function i(o,m){1&o&&(_.TgZ(0,"th"),_.SDv(1,42),_.qZA())}function r(o,m){1&o&&(_.TgZ(0,"th"),_.SDv(1,43),_.qZA())}function E(o,m){if(1&o&&_._UZ(0,"img",52),2&o){const t=_.oxw().$implicit;_.s9C("src",t.image,_.LSH)}}function a(o,m){if(1&o&&(_.TgZ(0,"span",53),_._uU(1),_.qZA()),2&o){const t=_.oxw().$implicit;_.xp6(1),_.hij(" ",t.name.substring(0,1).toUpperCase()," ")}}const M=function(o){return["/dash/organizations",o,"update"]};function v(o,m){if(1&o&&(_.TgZ(0,"td")(1,"a",54)(2,"span"),_._uU(3),_.qZA()()()),2&o){const t=_.oxw().$implicit;_.xp6(1),_.Q6J("routerLink",_.VKq(2,M,t.org_id)),_.xp6(2),_.Oqu(t.org_name)}}function y(o,m){if(1&o){const t=_.EpF();_.TgZ(0,"td",48)(1,"app-delete",55),_.NdJ("deleteItemEvent",function(d){_.CHM(t);const S=_.oxw(4);return _.KtG(S.onDeleted(d))}),_.qZA()()}if(2&o){const t=_.oxw().$implicit,s=_.oxw(3);_.xp6(1),_.Q6J("requestUrl",s.config.delEndpoint+"/"+t.id)}}function b(o,m){if(1&o){const t=_.EpF();_.TgZ(0,"tr")(1,"td"),_._uU(2),_.qZA(),_.TgZ(3,"td")(4,"div",44),_.YNc(5,E,1,1,"img",45),_.YNc(6,a,2,1,"span",46),_.qZA()(),_.TgZ(7,"td")(8,"a",47),_.NdJ("click",function(){const S=_.CHM(t).$implicit,R=_.oxw(3);return _.KtG(R.onUpsertClick(S.id))}),_._uU(9),_.qZA()(),_.YNc(10,v,4,4,"td",7),_.TgZ(11,"td"),_._uU(12),_.qZA(),_.TgZ(13,"td"),_._uU(14),_.qZA(),_.TgZ(15,"td"),_._uU(16),_.qZA(),_.TgZ(17,"td"),_._uU(18),_.qZA(),_.TgZ(19,"td")(20,"small"),_._uU(21),_.ALo(22,"readableDate"),_.qZA()(),_.TgZ(23,"td")(24,"small"),_._uU(25),_.ALo(26,"readableDate"),_.qZA()(),_.TgZ(27,"td",48)(28,"a",49),_.NdJ("click",function(){const S=_.CHM(t).$implicit,R=_.oxw(3);return _.KtG(R.onUpsertClick(S.id))}),_._UZ(29,"i",50),_.qZA()(),_.YNc(30,y,2,1,"td",51),_.qZA()}if(2&o){const t=m.$implicit,s=_.oxw(3);_.xp6(2),_.Oqu(t.id),_.xp6(3),_.Q6J("ngIf",null!=t.image),_.xp6(1),_.Q6J("ngIf",null==t.image),_.xp6(3),_.hij(" ",t.name," "),_.xp6(1),_.Q6J("ngIf",s.config.showUserFilter),_.xp6(2),_.Oqu(t.title),_.xp6(2),_.Oqu(t.phone),_.xp6(2),_.Oqu(t.email),_.xp6(2),_.Oqu(s.StringUtil.takeOnly(t.description,50)),_.xp6(3),_.Oqu(_.lcZ(22,12,t.created_at)),_.xp6(4),_.Oqu(_.lcZ(26,14,t.updated_at)),_.xp6(5),_.Q6J("ngIf",s.config.showDeleteButton)}}function Z(o,m){if(1&o&&(_.TgZ(0,"div",0)(1,"div",26)(2,"div",27)(3,"div",28)(4,"p",29),_._uU(5,"Employees that I've created"),_.qZA(),_.TgZ(6,"div",30)(7,"table",31)(8,"thead")(9,"tr")(10,"th"),_._uU(11,"Id"),_.qZA(),_.TgZ(12,"th"),_.SDv(13,32),_.qZA(),_.TgZ(14,"th"),_.SDv(15,33),_.qZA(),_.YNc(16,i,2,0,"th",7),_.TgZ(17,"th"),_.SDv(18,34),_.qZA(),_.TgZ(19,"th"),_.SDv(20,35),_.qZA(),_.TgZ(21,"th"),_.SDv(22,36),_.qZA(),_.TgZ(23,"th"),_.SDv(24,37),_.qZA(),_.TgZ(25,"th"),_.SDv(26,38),_.qZA(),_.TgZ(27,"th"),_.SDv(28,39),_.qZA(),_.TgZ(29,"th"),_.SDv(30,40),_.qZA(),_.YNc(31,r,2,0,"th",7),_.qZA()(),_.TgZ(32,"tbody"),_.YNc(33,b,31,16,"tr",41),_.qZA()()()()()()()),2&o){const t=_.oxw(2);_.Q6J("@dataLoaded",t.loading?"loading":"loaded")("@onColumn",t.layout==t.Layout.COLUMN),_.xp6(16),_.Q6J("ngIf",t.config.showUserFilter),_.xp6(15),_.Q6J("ngIf",t.config.showDeleteButton),_.xp6(2),_.Q6J("ngForOf",t.employees.content)}}function A(o,m){if(1&o&&(_.TgZ(0,"div",75),_._UZ(1,"img",52),_.qZA()),2&o){const t=_.oxw().$implicit;_.xp6(1),_.s9C("src",t.image,_.LSH)}}function o_(o,m){if(1&o&&(_.TgZ(0,"div",76)(1,"span",53),_._uU(2),_.qZA()()),2&o){const t=_.oxw().$implicit;_.xp6(2),_.hij(" ",t.name.substring(0,1).toUpperCase()," ")}}function n_(o,m){if(1&o&&(_.TgZ(0,"h6",77)(1,"a",54),_._uU(2),_.qZA()()),2&o){const t=_.oxw().$implicit;_.xp6(1),_.Q6J("routerLink",_.VKq(2,M,t.org_id)),_.xp6(1),_.hij(" ",t.org_name," ")}}function i_(o,m){if(1&o&&(_.TgZ(0,"small",78)(1,"b"),_._uU(2,"Updated"),_.qZA(),_._UZ(3,"br"),_._uU(4),_.ALo(5,"readableDate"),_.qZA()),2&o){const t=_.oxw().$implicit;_.xp6(4),_.hij(" ",_.lcZ(5,1,t.updated_at)," ")}}function E_(o,m){1&o&&(_.TgZ(0,"small",78),_._UZ(1,"br"),_.TgZ(2,"b"),_._uU(3,"Updated"),_.qZA(),_._UZ(4,"br"),_._uU(5,"Nil"),_.qZA())}function l_(o,m){if(1&o){const t=_.EpF();_.TgZ(0,"div",72)(1,"app-delete",79),_.NdJ("deleteItemEvent",function(d){_.CHM(t);const S=_.oxw(4);return _.KtG(S.onDeleted(d))}),_.qZA()()}if(2&o){const t=_.oxw().$implicit,s=_.oxw(3);_.xp6(1),_.Q6J("requestUrl",s.config.delEndpoint+"/"+t.id)("look","bx")}}function s_(o,m){if(1&o){const t=_.EpF();_.TgZ(0,"div",57)(1,"div",58)(2,"div",28),_.YNc(3,A,2,1,"div",59),_.YNc(4,o_,3,1,"div",60),_.TgZ(5,"h5",61)(6,"a",62),_.NdJ("click",function(){const S=_.CHM(t).$implicit,R=_.oxw(3);return _.KtG(R.onUpsertClick(S.id))}),_._uU(7),_.qZA()(),_.YNc(8,n_,3,4,"h6",63),_.TgZ(9,"div",0)(10,"div",64)(11,"p",65)(12,"small")(13,"b"),_._uU(14,"Created"),_.qZA(),_._UZ(15,"br"),_._uU(16),_.ALo(17,"readableDate"),_.qZA()()(),_.TgZ(18,"div",64)(19,"p",66),_.YNc(20,i_,6,3,"small",67),_.YNc(21,E_,6,0,"small",67),_.qZA()()(),_.TgZ(22,"p"),_._uU(23),_.qZA(),_.TgZ(24,"div")(25,"a",68)(26,"label",69),_._uU(27),_.qZA()()()(),_.TgZ(28,"div",70)(29,"div",71)(30,"div",72)(31,"a",47),_.NdJ("click",function(){const S=_.CHM(t).$implicit,R=_.oxw(3);return _.KtG(R.onUpsertClick(S.id))}),_._UZ(32,"i",73),_.qZA()(),_.YNc(33,l_,2,2,"div",74),_.qZA()()()()}if(2&o){const t=m.$implicit,s=_.oxw(3);_.xp6(3),_.Q6J("ngIf",t.image),_.xp6(1),_.Q6J("ngIf",null==t.image),_.xp6(3),_.hij(" ",t.name,""),_.xp6(1),_.Q6J("ngIf",s.config.showUserFilter&&t.org_name),_.xp6(8),_.Oqu(_.lcZ(17,10,t.created_at)),_.xp6(4),_.Q6J("ngIf",t.updated_at),_.xp6(1),_.Q6J("ngIf",!t.updated_at),_.xp6(2),_.hij(" ",s.StringUtil.takeOnly(t.description,50,!0)," "),_.xp6(4),_.Oqu(t.title),_.xp6(6),_.Q6J("ngIf",s.config.showDeleteButton)}}function r_(o,m){if(1&o&&(_.TgZ(0,"div",0),_.YNc(1,s_,34,12,"div",56),_.qZA()),2&o){const t=_.oxw(2);_.Q6J("@dataLoaded",t.loading?"loading":"loaded")("@onGrid",t.layout==t.Layout.GRID),_.xp6(1),_.Q6J("ngForOf",t.employees.content)}}function a_(o,m){if(1&o&&(_.TgZ(0,"div"),_.YNc(1,Z,34,5,"div",25),_.YNc(2,r_,2,3,"div",25),_.qZA()),2&o){const t=_.oxw();_.xp6(1),_.Q6J("ngIf",t.layout===t.Layout.COLUMN),_.xp6(1),_.Q6J("ngIf",t.layout===t.Layout.GRID)}}let d_=(()=>{class o extends D.o{componentName(){return"EmployeeListComponent"}constructor(t,s,d,S,R,$,H,F,G){super(t,s,d,R,G),this.activatedRoute=$,this.employeeService=H,this.notifier=F,this.config=L.fG,this.filterData=c.M9,this.employees=e.H,S.isAdmin()&&(this.config.endpoint=L.wl.adminEndpoint,this.config.delEndpoint=L.wl.adminEndpoint,this.config.showUserFilter=!0)}initialize(){this.activatedRoute.queryParams.subscribe(t=>{this.filterData=(0,c.OP)(t),this.onOrgLoaded(s=>{this.fetchEmployees({q:this.filterData.query,username:this.filterData.username,from_date:this.filterData.fromDate,to_date:this.filterData.toDate,page:this.filterData.page,size:this.filterData.size,org_id:s})})})}getBreadcrumbItems(){return[{text:this.translations.Dashboard,link:null,active:!1},{text:"Employees",link:null,active:!0}]}fetchEmployees(t){this.loading=!0;const s=this.componentKey(x.Z.EMPLOYEES.SEARCH(t));this.employeeService.search(s,this.config.endpoint,t),this.subscribe(s,null,(d,S)=>{this.employees=S.data,this.loading=!1}),this.subscribe(this.getErrorKey(s),null,(d,S)=>{this.notifier.error("Error",S.data.error.message)})}onDeleted(t){t&&(this.notifier.success("Success","Employee is deleted"),this.ngOnInit())}getConfig(){return this.config}getRoutes(){return{create:L.n5.create,update:t=>L.n5.update(t),params:(0,c.oZ)(this.filterData)}}getUpsertComponent(){return h.d}static#_=this.\u0275fac=function(s){return new(s||o)(_.Y36(z.Y),_.Y36(O.F0),_.Y36(P.z),_.Y36(T.e),_.Y36(N.x),_.Y36(O.gz),_.Y36(u.G),_.Y36(g.l),_.Y36(C.M))};static#e=this.\u0275cmp=_.Xpm({type:o,selectors:[["app-employee-list"]],features:[_.qOj],decls:11,vars:7,consts:function(){let t,s,d,S,R,$,H,F,G,k,__,e_,t_;return t="Cooking your data, please wait..",s="No items",d="Image",S="Name",R="Title",$="Phone",H="Email",F="Description",G="Created At",k="Last Updated",__="Update",e_="Organization",t_="Delete",[[1,"row"],[1,"col-sm-12"],[3,"title","layout","breadcrumbItems","layoutSelected"],[1,"card","card-body"],[3,"addButtonClick"],[3,"bar",4,"ngIf"],["class","account-pages my-2",4,"ngIf"],[4,"ngIf"],[3,"page"],[3,"bar"],[1,"account-pages","my-2"],[1,"container"],[1,"col-lg-12"],[1,"text-center","mb-5"],[1,"display-2","fw-medium"],[1,"bx","bx-buoy","bx-spin","text-primary","display-3"],["class","text-primary",4,"ngIf"],["class","text-uppercase",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-md-8","col-xl-6"],["src","assets/apanel/images/error-img.png","alt","",1,"img-fluid"],[1,"text-primary"],t,[1,"text-uppercase"],s,["class","row",4,"ngIf"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title-desc"],[1,"table","table-responsive"],[1,"table","table-editable","table-nowrap","align-middle","table-edits","table-hover","table-bordered"],d,S,R,$,H,F,G,k,__,[4,"ngFor","ngForOf"],e_,t_,[1,"avatar-sm","mx-auto"],["class","rounded-circle avatar-sm object-fit-cover","alt","",3,"src",4,"ngIf"],["class","avatar-title rounded-circle bg-primary-subtle text-primary font-size-16",4,"ngIf"],["href","javascript: void(0);",3,"click"],[2,"width","100px"],["title","Edit",1,"btn","btn-outline-warning","btn-sm","edit",3,"click"],[1,"fas","fa-pencil-alt"],["style","width: 100px",4,"ngIf"],["alt","",1,"rounded-circle","avatar-sm","object-fit-cover",3,"src"],[1,"avatar-title","rounded-circle","bg-primary-subtle","text-primary","font-size-16"],["href","javascript:void(0);",3,"routerLink"],[3,"requestUrl","deleteItemEvent"],["class","col-xxl-2 col-xl-3 col-sm-4",4,"ngFor","ngForOf"],[1,"col-xxl-2","col-xl-3","col-sm-4"],[1,"card","text-center"],["class","mb-4",4,"ngIf"],["class","avatar-sm mx-auto mb-4",4,"ngIf"],[1,"font-size-15","mb-1"],["href","javascript: void(0);",1,"text-dark",3,"click"],["class","font-size-10 text-info",4,"ngIf"],[1,"col-6","col-sm-6"],[1,"text-muted","text-end"],[1,"text-muted","text-start"],["class","font-size-10",4,"ngIf"],["href","javascript: void(0);"],[1,"badge","bg-success","font-size-11","m-1"],[1,"card-footer","bg-transparent","border-top"],[1,"contact-links","d-flex","font-size-20"],[1,"flex-fill"],[1,"bx","bx-edit","text-primary"],["class","flex-fill",4,"ngIf"],[1,"mb-4"],[1,"avatar-sm","mx-auto","mb-4"],[1,"font-size-10","text-info"],[1,"font-size-10"],[3,"requestUrl","look","deleteItemEvent"]]},template:function(s,d){1&s&&(_.TgZ(0,"div",0)(1,"div",1)(2,"app-breadcrumb",2),_.NdJ("layoutSelected",function(R){return d.onLayoutSelected(R)}),_.qZA()()(),_.TgZ(3,"div",0)(4,"div",1)(5,"div",3)(6,"app-basic-filter",4),_.NdJ("addButtonClick",function(){return d.onUpsertClick(null)}),_.qZA()()()(),_.YNc(7,X,1,1,"util-progress",5),_.YNc(8,K,13,2,"div",6),_.YNc(9,a_,3,2,"div",7),_._UZ(10,"app-pagination",8)),2&s&&(_.xp6(2),_.Q6J("title","Employees")("layout",d.layout)("breadcrumbItems",d.breadcrumbItems),_.xp6(5),_.Q6J("ngIf",d.loading),_.xp6(1),_.Q6J("ngIf",d.employees.empty),_.xp6(1),_.Q6J("ngIf",!d.employees.empty),_.xp6(1),_.Q6J("page",d.employees))},dependencies:[l.sg,l.O5,O.rH,I.t,Y.Q,J.D,V.T,w.L,q.G]})}return o})(),W=(()=>{class o{static#_=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275cmp=_.Xpm({type:o,selectors:[["app-employee"]],decls:1,vars:0,template:function(s,d){1&s&&_._UZ(0,"app-employee-list")},dependencies:[d_]})}return o})();const m_=[{path:"employees",component:W},{path:"employees/create",component:W},{path:"employees/:id/update",component:h.d}];let S_=(()=>{class o{static#_=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=_.oAB({type:o});static#t=this.\u0275inj=_.cJS({imports:[O.Bz.forChild(m_),O.Bz]})}return o})();var c_=n(9797),j=n(6223),p_=n(7151),O_=n(4807),P_=n(4044),T_=n(5774),M_=n(4590);let u_=(()=>{class o{static#_=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=_.oAB({type:o});static#t=this.\u0275inj=_.cJS({imports:[l.ez,S_,c_.CmsModule,j.UX,p_.g,j.u5,O_.A0,P_.p,T_.DashModule,M_.UserModule]})}return o})()}}]);