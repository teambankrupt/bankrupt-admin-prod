"use strict";(self.webpackChunkbankrupt_frontend=self.webpackChunkbankrupt_frontend||[]).push([[527],{9527:(E,p,l)=>{l.r(p),l.d(p,{AccountingModule:()=>w});var s=l(6814),d=l(1662),t=l(5879),m=l(8637),f=l(7259),h=l(8174),C=l(2181),g=function(o){return o.DEBIT="DEBIT",o.CREDIT="CREDIT",o}(g||{}),T=l(1855),v=l(30),_=l(6945),x=l(8480),Z=l(5462),y=l(1822),b=l(4736),A=l(6075),O=l(2770);function M(o,c){1&o&&t._UZ(0,"util-progress",16),2&o&&t.Q6J("bar",!0)}function P(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"div",6)(3,"div",19)(4,"div",20),t._UZ(5,"i",21),t.qZA(),t.TgZ(6,"div",22)(7,"p",23)(8,"a",24),t.NdJ("click",function(){const a=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.filterTnx(a.id,null))}),t._uU(9),t.qZA()(),t.TgZ(10,"h5",25),t._uU(11),t.TgZ(12,"span",26),t._uU(13),t.qZA()()()()()()()}if(2&o){const n=c.$implicit;t.xp6(9),t.Oqu(n.currency),t.xp6(2),t.hij("",n.balance," "),t.xp6(2),t.hij(" ",n.currency_symbol,"")}}function U(o,c){1&o&&t._UZ(0,"util-progress",16),2&o&&t.Q6J("bar",!0)}function J(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"readableDate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td")(7,"a",24),t.NdJ("click",function(){const a=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.filterTnx(a.account_id,null))}),t._uU(8),t.qZA()(),t.TgZ(9,"td")(10,"b"),t._uU(11),t.qZA(),t.TgZ(12,"span",26),t._uU(13),t.qZA()(),t.TgZ(14,"td",27),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.TgZ(18,"a",28),t.NdJ("click",function(){const a=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.copyToClipboard(a.trnx_id))}),t._uU(19,"Copy"),t.qZA()()()}if(2&o){const n=c.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,8,n.created_at)),t.xp6(3),t.Oqu(n.description),t.xp6(3),t.Oqu(n.currency_label),t.xp6(3),t.Oqu(n.amount),t.xp6(2),t.hij(" ",n.currency_symbol,""),t.xp6(1),t.Q6J("ngClass","text-danger"),t.xp6(1),t.Oqu(n.type),t.xp6(2),t.hij("",n.trnx_id," \xa0")}}const W=[{path:"wallet",component:(()=>{class o extends m.H{constructor(n,i,e,a,r,u,B){super(n,i,e),this.authService=a,this.notifier=r,this.walletService=u,this.route=B,this.wallet=null,this.tnxType=null,this.onCanceled=new t.vpe,this.onCompleted=new t.vpe,this.filter=C.h,this.TransactionType=g}componentName(){return"WalletComponent"}ngOnInit(){this.route.queryParams.subscribe(n=>{let i=(0,T.OP)(n),e=n.account_id;this.tnxType=n.type,this.authService.isAdmin()?this.fetchWallet({q:i.query,from_date:i.fromDate,to_date:i.toDate,page:i.page,account_id:e,type:this.tnxType},i.username):this.fetchWallet({q:i.query,from_date:i.fromDate,to_date:i.toDate,page:i.page,account_id:e,type:this.tnxType})})}fetchWallet(n,i=null){this.loading=!0;let e=this.componentKey(f.Z.WALLET.FETCH_MY_WALLET());this.walletService.fetchWallet(e,n,i),this.subscribe(e,null,(a,r)=>{this.wallet=r.data,this.loading=!1}),this.subscribe(this.getErrorKey(e),null,(a,r)=>{this.notifier.warning("Error",r.data.error.message)})}copyToClipboard(n){h.g.copyToClipboard(n),this.notifier.info("Copied","Copied to clipboard")}onCloseClick(){this.onCanceled.emit()}filterTnx(n,i){let e={};null!=n&&(e={...e,account_id:n}),null!=i&&(e={...e,type:i}),null==n&&null==i&&(e={...e,account_id:null,type:null}),this.router.navigate(["."],{relativeTo:this.route,queryParams:e,queryParamsHandling:"merge"}).then(a=>{})}clearFilter(){this.navigateByUrl("/dash/accounts/wallet",n=>{})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(v.Y),t.Y36(d.F0),t.Y36(_.z),t.Y36(x.e),t.Y36(Z.l),t.Y36(y.X),t.Y36(d.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-wallet"]],features:[t.qOj],decls:45,vars:11,consts:[[3,"bar",4,"ngIf"],[1,"row"],[1,"col-xl-8"],["class","col-sm-4",4,"ngFor","ngForOf"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[3,"showAddBtn","addBtnText","addButtonClick"],[1,"card-title","mb-4"],[1,"nav","nav-tabs","nav-tabs-custom"],[1,"nav-item"],["href","javascript: void(0);",1,"nav-link",3,"ngClass","click"],[1,"mt-4"],[1,"table-responsive"],["id","datatable",1,"table","table-hover","dt-responsive","nowrap",2,"border-collapse","collapse","border-spacing","0","width","100%"],[4,"ngFor","ngForOf"],[3,"bar"],[1,"col-sm-4"],[1,"card","mini-stats-wid"],[1,"d-flex"],[1,"flex-shrink-0","me-3","align-self-center"],[1,"mdi","mdi-bitcoin","h2","text-warning","mb-0"],[1,"flex-grow-1"],[1,"text-muted","mb-2"],["href","javascript: void(0);",3,"click"],[1,"mb-0"],[1,"font-size-14","text-muted"],[3,"ngClass"],["href","javascript:void(0);",1,"card-link",3,"click"]],template:function(i,e){1&i&&(t.YNc(0,M,1,1,"util-progress",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",1),t.YNc(4,P,14,3,"div",3),t.qZA()()(),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"app-basic-filter",7),t.NdJ("addButtonClick",function(){return e.clearFilter()}),t.qZA()()()(),t.YNc(9,U,1,1,"util-progress",0),t.TgZ(10,"div",1)(11,"div",4)(12,"div",5)(13,"div",6)(14,"h4",8),t._uU(15,"Transactions"),t.qZA(),t.TgZ(16,"ul",9)(17,"li",10)(18,"a",11),t.NdJ("click",function(){return e.filterTnx(null,null)}),t._uU(19,"All"),t.qZA()(),t.TgZ(20,"li",10)(21,"a",11),t.NdJ("click",function(){return e.filterTnx(null,e.TransactionType.DEBIT)}),t._uU(22,"Debit"),t.qZA()(),t.TgZ(23,"li",10)(24,"a",11),t.NdJ("click",function(){return e.filterTnx(null,e.TransactionType.CREDIT)}),t._uU(25,"Credit"),t.qZA()()(),t.TgZ(26,"div",12)(27,"div",13)(28,"table",14)(29,"thead")(30,"tr")(31,"th"),t._uU(32,"Date"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Desc."),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Account"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Amount"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Type"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Tnx"),t.qZA()()(),t.TgZ(43,"tbody"),t.YNc(44,J,20,10,"tr",15),t.qZA()()()()()()()()),2&i&&(t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("@dataLoaded",e.loading?"loading":"loaded"),t.xp6(3),t.Q6J("ngForOf",null==e.wallet?null:e.wallet.accounts),t.xp6(4),t.Q6J("showAddBtn",!0)("addBtnText","Show All"),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("@dataLoaded",e.loading?"loading":"loaded"),t.xp6(8),t.Q6J("ngClass",null==e.tnxType?"active":""),t.xp6(3),t.Q6J("ngClass",e.tnxType==e.TransactionType.DEBIT?"active":""),t.xp6(3),t.Q6J("ngClass",e.tnxType==e.TransactionType.CREDIT?"active":""),t.xp6(20),t.Q6J("ngForOf",null==e.wallet?null:e.wallet.recent_transactions))},dependencies:[s.mk,s.sg,s.O5,b.t,A.D,O.G],styles:[".leaderboard[_ngcontent-%COMP%]{background:#211e1e}.leaderboard[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .leaderboard[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f5f5f5}mat-dialog-content[_ngcontent-%COMP%]{padding-bottom:10px}mat-grid-tile[_ngcontent-%COMP%]{border:1px dashed whitesmoke}mat-grid-tile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#44d62c}.btn-redeem[_ngcontent-%COMP%]{color:#44d62c}.info[_ngcontent-%COMP%]{margin-bottom:10px;font-size:.7em}.username[_ngcontent-%COMP%]{color:#44d62c}.header-avatar[_ngcontent-%COMP%]{max-height:50px;max-width:50px}.tnx-section[_ngcontent-%COMP%]{font-size:.8em;color:#f5f5f5;max-width:60%!important}.tnx-section[_ngcontent-%COMP%]   .tnx-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.tnx-section[_ngcontent-%COMP%]   .tnx-header-action[_ngcontent-%COMP%]{color:#44d62c}.tnx-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tnx-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em;color:#f5f5f5}.tnx-section[_ngcontent-%COMP%]   .btn-copy[_ngcontent-%COMP%]{color:#44d62c;font-size:.8em}"]})}return o})()}];let q=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(W),d.Bz]})}return o})();var D=l(7151);let w=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[s.ez,q,D.g]})}return o})()}}]);